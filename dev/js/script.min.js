"use strict";

window.onload = function () {
  var burger = document.querySelector('.hamburger');
  var menu = document.querySelector('.menu');
  burger.addEventListener('click', menuOpen);

  function menuOpen() {
    menu.classList.toggle('menu-open');
  }

  menu.addEventListener('click', menuClose);

  function menuClose(e) {
    var targetElem = e.target;
    var goalLink = targetElem.classList.contains('menu__link');

    if (goalLink) {
      targetElem.closest('nav.menu').classList.toggle('menu-open');
    }
  }

  document.addEventListener('click', function (e) {
    var targetElem = e.target;
    console.log(targetElem);
    var goalLink1 = targetElem.classList.contains('hamburger');
    var goalLink2 = targetElem.classList.contains('hamburger__item');

    if (!goalLink1 && !goalLink2 && menu.classList.contains('menu-open')) {
      menu.classList.remove('menu-open');
    }
  });
};
"use strict";

// VALIDATION ORDER SERVICE
var formOrder = document.querySelector('#form');
var inputName = formOrder.elements.input_name;
var inputLink = formOrder.elements.input_link;
var inputEmail = formOrder.elements.input_email;
var btnOrder = formOrder.querySelector('button[type="submit"]');
var regexName = /^[A-zА-яЁё, \n]+$/;
var regexSite = /^[-a-z0-9+&@#\/%?=~_|!:,.;]\.*[-a-z0-9+&@#\/%?=~_|!:,.;]*\.[-a-z0-9+&@#\/%=~_|]/;
var regexMail = /@(?:[A-z0-9](?:[A-z0-9-]*[A-z0-9])?)/;

function valid(elem, target, reg) {
  var check = target.parentElement.querySelector('.icon-error');
  var succes = target.parentElement.querySelector('.icon-check');

  if (elem.value.match(reg) && elem.value.length > 0) {
    succes.style.visibility = 'visible';
    check.style.visibility = 'hidden';
  } else if (!elem.value.match(reg) && elem.value.length > 0) {
    succes.style.visibility = 'hidden';
    check.style.visibility = 'visible';
  } else {
    succes.style.visibility = 'hidden';
    check.style.visibility = 'hidden';
  }
}

function btnDisabled() {
  var iconCheck = formOrder.querySelectorAll('.icon-check');
  var arr = [];

  for (var i = 0; i < iconCheck.length; i++) {
    if (iconCheck[i].style.visibility == 'visible') {
      arr.push('1');
    }
  }

  if (arr.length >= 3) {
    btnOrder.removeAttribute('disabled');
  } else {
    btnOrder.setAttribute('disabled', 'disabled');
  }
}

inputName.oninput = function (event) {
  var target = event.target;
  valid(inputName, target, regexName);
  btnDisabled();
};

inputLink.oninput = function (event) {
  var target = event.target;
  valid(inputLink, target, regexSite);
  btnDisabled();
};

inputEmail.oninput = function (event) {
  var target = event.target;
  valid(inputEmail, target, regexMail);
  btnDisabled();
};